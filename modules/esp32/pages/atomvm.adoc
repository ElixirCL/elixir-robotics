= AtomVM

AtomVM es una m√°quina virtual ligera que permite ejecutar bytecode de Erlang, Elixir y LFE (Lisp Flavored Erlang) en dispositivos embebidos con pocos recursos (como microcontroladores). Su objetivo es hacer posible usar lenguajes del ecosistema BEAM en hardware donde la m√°quina virtual de Erlang tradicional no puede correr por ser demasiado pesada.

== Sus caracter√≠sticas principales son:
* Permite usar lenguajes funcionales como Elixir en entornos de muy bajo nivel.

* Consume muy poca memoria (menos de 500 KB en muchos casos).

* Soporta concurrencia ligera y estructuras de datos funcionales.

* Ideal para el desarrollo de sistemas embebidos inteligentes y compactos

== Historia

*AtomVM* comenz√≥ su desarrollo en el a√±o 2018 por *Pascal Gigler* con el objetivo de llevar Elixir y Erlang a un hardware m√°s peque√±o. La comunidad fue creciendo, sumando desarrolladores que aportaron soporte para nuevos dispositivos y bibliotecas, llegando a poder realizarse proyectos industriales de IoT que necesitaban de un dispositivo con tolerancia a fallos,  y  concurrencia, las cuales tenia  el dispositivo.

== Elixir Nerves

Es un framework para crear firmware de sistemas  embebidos de con *Elixir*  que  corre sobre la maquina virtual de *Erlang*: "_*BEAM*_".

Es ideal para trabajar  con dispositivos potentes como *Raspberry Pi, BeagleBone  Black,  etc.* y  permite trabajar con sistemas robustos con interfaces conectadas a hardware real (GPIO, 12C, SPI, etc).

=== Caracteristicas

* Se puede desarrollar tu firmware en Elixir
* Soporta actualizaciones
* Tiene integraci√≥n con *Phoenix* para paneles  de control  web
* Usa herramientas modernas de *Elixir* como Mix, OTP y  GenServer.

== üå°Ô∏è Ejemplo pr√°ctico: Medici√≥n ambiental con AtomVM y DHT11

Este ejemplo usa un sensor DHT11 conectado a un ESP32, leyendo temperatura y humedad usando **Elixir sobre AtomVM**.

Requisitos:
* Microcontrolador ESP32 con AtomVM cargado.
* Sensor DHT11 conectado al pin GPIO 4 (puedes cambiarlo).
* M√≥dulo nativo `avm_dht` disponible en el firmware de AtomVM.

=== C√≥digo fuente en Elixir

[source,elixir]
----
defmodule DHTReader do
  @dht_pin 4

  def start do
    IO.puts("Iniciando lectura del sensor DHT11...")

    loop()
  end

  defp loop do
    case :avm_dht.read(@dht_pin, :dht11) do
      {:ok, temperature, humidity} ->
        IO.puts("Temperatura: #{temperature} ¬∞C")
        IO.puts("Humedad: #{humidity} %")

      {:error, reason} ->
        IO.puts("Error al leer sensor: #{inspect(reason)}")
    end

    :timer.sleep(5000)  // Espera 5 segundos
    loop()
  end
end

DHTReader.start()
----

=== Conexiones del sensor DHT11 al ESP32

[cols="2,2", options="header"]
|===
| Sensor DHT11 | ESP32
| VCC          | 3.3V
| DATA         | GPIO 4
| GND          | GND
|===

=== Instrucciones

. Compila el archivo con `elixirc dht_reader.ex`.
. Sube el archivo `.beam` al ESP32 con las herramientas de AtomVM.
. Aseg√∫rate de incluir el m√≥dulo nativo `avm_dht` en tu firmware.
. El ESP32 imprimir√° por consola la temperatura y humedad cada 5 segundos.

NOTE: Estp sumado Elixir Nerves se pueden hacer otros sistemas m√°s complejos como sistemas de domotica, sistemas industriales, estaciones meteorol√≥gicas con panel, etc.

== ¬øC√≥mo se puede usar en un proyecto?
Podr√≠as aplicar estas tecnolog√≠as en proyectos como:

=== Proyecto ejemplo: Sistema de riego autom√°tico inteligente

*ESP32 con AtomVM mide la humedad del suelo.
*Si la humedad es baja, activa una electrov√°lvula.
*Se comunica v√≠a WiFi con una Raspberry Pi con Nerves, que:

Muestra datos en una interfaz web.

Permite configurar umbrales de riego.

Guarda hist√≥rico en una base de datos.

Este sistema permite combinar lo mejor de ambos mundos:

Microcontroladores peque√±os y eficientes (ESP32 con AtomVM).

Sistemas completos y robustos (Raspberry con Nerves).

== ¬øQu√© hardware se recomienda?
=== Para AtomVM (microcontroladores):
- ESP32
- ESP32-S2 o ESP32-C3
-  STM32 (m√°s potente, pero m√°s complejo de programar).
-  Placas con m√≠nimo 512 KB de RAM y 2 MB de Flash.

=== Para Nerves:
-  Raspberry Pi 3 o 4 (mejor soporte).
- BeagleBone Black.
- GRiSP (especial para Elixir, ejecuta directamente BEAM sin sistema operativo).
- Cualquier SBC (single board computer) compatible con Linux y GPIO.

== Ventajas de usar Elixir + AtomVM/Nerves

* C√≥digo funcional, f√°cil de razonar y mantener.
* Alta concurrencia con procesos ligeros.
* Alta tolerancia a fallos (modelo de actores de Erlang).
* Ideal para IoT, dom√≥tica, robots, monitoreo industrial y sistemas distribuidos.
* Usas el mismo lenguaje para la nube y el hardware.






